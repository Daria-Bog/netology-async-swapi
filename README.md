# Async SWAPI Loader

Асинхронное ETL-приложение на Python для выгрузки данных о персонажах вселенной Star Wars из [SWAPI](https://www.swapi.tech/) и их сохранения в базу данных PostgreSQL.

## Технологии
* **Python 3.11+**
* **Asyncio / aiohttp** — асинхронное взаимодействие с API.
* **SQLAlchemy (Async)** — асинхронная работа с СУБД.
* **Tenacity** — логика повторных попыток (retries) при сетевых сбоях.
* **PostgreSQL & Docker Compose** — контейнеризация базы данных.

## Архитектура и описание работы

Проект разделен на логические блоки для соответствия принципам чистой архитектуры:

1. **Миграции (`migrate.py`)**: Отдельный скрипт для инициализации схемы БД. Использует безопасное создание таблиц (`IF NOT EXISTS`), что позволяет запускать его многократно без потери данных.
2. **Трансформация данных**: Скрипт не просто сохраняет ссылки (URL), а выполняет дополнительные асинхронные запросы для получения названий планет, имен видов и названий фильмов.
3. **Динамический охват**: Программа автоматически запрашивает у API общее количество записей (`total_records`), исключая "жесткое" ограничение диапазона ID.
4. **Идемпотентность**: Запись в базу данных реализована через метод `merge`, что предотвращает ошибки при повторном запуске и обновляет существующие записи.